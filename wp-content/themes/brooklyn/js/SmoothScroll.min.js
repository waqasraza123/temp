
var framerate=50;var animtime=400;var stepsize=120;var pulseAlgorithm=true;var pulseScale=8;var pulseNormalize=1;var acceleration=true;var accelDelta=10;var accelMax=1;var keyboardsupport=true;var disableKeyboard=false;var arrowscroll=50;var exclude="";var disabled=false;var frame=false;var direction={x:0,y:0};var initdone=false;var fixedback=true;var root=document.documentElement;var activeElement;var key={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36};function init(){if(!document.body){return}var a=document.body;var b=document.documentElement;var h=window.innerHeight;var e=a.scrollHeight;root=(document.compatMode.indexOf("CSS")>=0)?b:a;activeElement=a;initdone=true;if(top!=self){frame=true}else{if(e>h&&(a.offsetHeight<=h||b.offsetHeight<=h)){var g=false;var d=function(){if(!g&&b.scrollHeight!=document.height){g=true;setTimeout(function(){b.style.height=document.height+"px";g=false},500)}};b.style.height="";setTimeout(d,10);addEvent("DOMNodeInserted",d);addEvent("DOMNodeRemoved",d);if(root.offsetHeight<=h){var f=document.createElement("div");f.style.clear="both";a.appendChild(f)}}}if(document.URL.indexOf("mail.google.com")>-1){var c=document.createElement("style");c.innerHTML=".iu { visibility: hidden }";(document.getElementsByTagName("head")[0]||b).appendChild(c)}if(!fixedback&&!disabled){a.style.backgroundAttachment="scroll";b.style.backgroundAttachment="scroll"}}var que=[];var pending=false;var lastScroll=+new Date;function scrollArray(d,c,h,e){e||(e=1000);directionCheck(c,h);if(acceleration){var a=+new Date;var i=a-lastScroll;if(i<accelDelta){var f=(1+(30/i))/2;if(f>1){f=Math.min(f,accelMax);c*=f;h*=f}}lastScroll=+new Date}que.push({x:c,y:h,lastX:(c<0)?0.99:-0.99,lastY:(h<0)?0.99:-0.99,start:+new Date});if(pending){return}var g=(d===document.body);var b=function(){var j=+new Date;var q=0;var p=0;for(var l=0;l<que.length;l++){var s=que[l];var r=j-s.start;var k=(r>=animtime);var m=(k)?1:r/animtime;if(pulseAlgorithm){m=pulse(m)}var o=(s.x*m-s.lastX)>>0;var n=(s.y*m-s.lastY)>>0;q+=o;p+=n;s.lastX+=o;s.lastY+=n;if(k){que.splice(l,1);l--}}if(g){window.scrollBy(q,p)}else{if(q){d.scrollLeft+=q}if(p){d.scrollTop+=p}}if(!c&&!h){que=[]}if(que.length){requestFrame(b,d,(e/framerate+1))}else{pending=false}};requestFrame(b,d,0);pending=true}function wheel(d){if(!initdone){init()}var e=d.target;var c=overflowingAncestor(e);if(!c||d.defaultPrevented||isNodeName(activeElement,"embed")||(isNodeName(e,"embed")&&/\.pdf/i.test(e.src))){return true}var b=d.wheelDeltaX||0;var a=d.wheelDeltaY||0;if(!b&&!a){a=d.wheelDelta||0}if(Math.abs(b)>1.2){b*=stepsize/120}if(Math.abs(a)>1.2){a*=stepsize/120}scrollArray(c,-b,-a);d.preventDefault()}function keydown(b){var g=b.target;var e=b.ctrlKey||b.altKey||b.metaKey||(b.shiftKey&&b.keyCode!==key.spacebar);if(/input|textarea|select|embed/i.test(g.nodeName)||g.isContentEditable||b.defaultPrevented||e){return true}if(isNodeName(g,"button")&&b.keyCode===key.spacebar){return true}var c,i=0,h=0;var d=overflowingAncestor(activeElement);var f=d.clientHeight;if(d==document.body){f=window.innerHeight}switch(b.keyCode){case key.up:h=-arrowscroll;break;case key.down:h=arrowscroll;break;case key.spacebar:c=b.shiftKey?1:-1;h=-c*f*0.9;break;case key.pageup:h=-f*0.9;break;case key.pagedown:h=f*0.9;break;case key.home:h=-d.scrollTop;break;case key.end:var a=d.scrollHeight-d.scrollTop-f;h=(a>0)?a+10:0;break;case key.left:i=-arrowscroll;break;case key.right:i=arrowscroll;break;default:return true}scrollArray(d,i,h);b.preventDefault()}function mousedown(a){activeElement=a.target}var cache={};setInterval(function(){cache={}},10*1000);var uniqueID=(function(){var a=0;return function(b){return b.uniqueID||(b.uniqueID=a++)}})();function setCache(b,a){for(var c=b.length;c--;){cache[uniqueID(b[c])]=a}return a}function overflowingAncestor(d){var b=[];var a=root.scrollHeight;do{var c=cache[uniqueID(d)];if(c){return setCache(b,c)}b.push(d);if(a===d.scrollHeight){if(!frame||root.clientHeight+10<a){return setCache(b,document.body)}}else{if(d.clientHeight+10<d.scrollHeight){overflow=getComputedStyle(d,"").getPropertyValue("overflow-y");if(overflow==="scroll"||overflow==="auto"){return setCache(b,d)}}}}while(d=d.parentNode)}function addEvent(c,b,a){window.addEventListener(c,b,(a||false))}function removeEvent(c,b,a){window.removeEventListener(c,b,(a||false))}function isNodeName(b,a){return(b.nodeName||"").toLowerCase()===a.toLowerCase()}function directionCheck(a,b){a=(a>0)?1:-1;b=(b>0)?1:-1;if(direction.x!==a||direction.y!==b){direction.x=a;direction.y=b;que=[];lastScroll=0}}var requestFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(c,b,a){window.setTimeout(c,a||(1000/60))}})();function pulse_(a){var c,d,b;a=a*pulseScale;if(a<1){c=a-(1-Math.exp(-a))}else{d=Math.exp(-1);a-=1;b=1-Math.exp(-a);c=d+(b*(1-d))}return c*pulseNormalize}function pulse(a){if(a>=1){return 1}if(a<=0){return 0}if(pulseNormalize==1){pulseNormalize/=pulse_(1)}return pulse_(a)}addEvent("mousedown",mousedown);addEvent("mousewheel",wheel);addEvent("load",init);