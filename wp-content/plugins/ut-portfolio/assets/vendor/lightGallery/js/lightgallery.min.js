
/*! lightgallery - v1.2.6 - 2015-10-07
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2015 Sachin N; Licensed Apache 2.0 */
(function(d,c,a,f){var e={mode:"lg-slide",cssEasing:"cubic-bezier(0.25, 0, 0.25, 1)",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6000,useLeft:false,closable:true,loop:true,escKey:true,keyPress:true,controls:true,slideEndAnimatoin:true,hideControlOnEnd:false,mousewheel:true,appendSubHtmlTo:".lg-sub-html",preload:1,showAfterLoad:true,selector:"",nextHtml:"",prevHtml:"",index:false,iframeMaxWidth:"100%",download:true,counter:true,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:true,enableDrag:true,dynamic:false,dynamicEl:[],galleryId:1};function b(h,g){this.el=h;this.$el=d(h);this.s=d.extend({},e,g);this.modules={};this.lGalleryOn=false;this.lgBusy=false;this.hideBartimeout=false;this.isTouch=("ontouchstart" in a.documentElement);if(this.s.slideEndAnimatoin){this.s.hideControlOnEnd=false}if(this.s.dynamic){this.$items=this.s.dynamicEl}else{if(this.s.selector==="this"){this.$items=this.$el}else{if(this.s.selector!==""){this.$items=this.$el.find(d(this.s.selector))}else{this.$items=this.$el.children()}}}this.$slide="";this.$outer="";this.init();return this}b.prototype.init=function(){var h=this;if(h.s.preload>h.$items.length){h.s.preload=h.$items.length}var g=c.location.hash;if(g.indexOf("lg="+this.s.galleryId)>0){h.index=parseInt(g.split("&slide=")[1],10);d("body").addClass("lg-from-hash");if(!d("body").hasClass("lg-on")){setTimeout(function(){h.build(h.index);d("body").addClass("lg-on")})}}if(h.s.dynamic){h.$el.trigger("onBeforeOpen.lg");h.index=h.s.index||0;if(!d("body").hasClass("lg-on")){setTimeout(function(){h.build(h.index);d("body").addClass("lg-on")})}}else{h.$items.on("click.lgcustom",function(i){try{i.preventDefault();i.preventDefault()}catch(j){i.returnValue=false}h.$el.trigger("onBeforeOpen.lg");h.index=h.s.index||h.$items.index(this);if(!d("body").hasClass("lg-on")){h.build(h.index);d("body").addClass("lg-on")}})}};b.prototype.build=function(g){var h=this;h.structure();d.each(d.fn.lightGallery.modules,function(i){h.modules[i]=new d.fn.lightGallery.modules[i](h.el)});h.slide(g,false,false);if(h.s.keyPress){h.keyPress()}if(h.$items.length>1){h.arrow();setTimeout(function(){h.enableDrag();h.enableSwipe()},50);if(h.s.mousewheel){h.mousewheel()}}h.counter();h.closeGallery();h.$el.trigger("onAfterOpen.lg");h.$outer.on("mousemove.lg click.lg touchstart.lg",function(){h.$outer.removeClass("lg-hide-items");clearTimeout(h.hideBartimeout);h.hideBartimeout=setTimeout(function(){h.$outer.addClass("lg-hide-items")},h.s.hideBarsDelay)})};b.prototype.structure=function(){var l="";var g="";var h=0;var k="";var j;var n=this;d("body").append('<div class="lg-backdrop"></div>');d(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms");for(h=0;h<this.$items.length;h++){l+='<div class="lg-item"></div>'}if(this.s.controls&&this.$items.length>1){g='<div class="lg-actions"><div class="lg-prev lg-icon">'+this.s.prevHtml+'</div><div class="lg-next lg-icon">'+this.s.nextHtml+"</div></div>"}if(this.s.appendSubHtmlTo===".lg-sub-html"){k='<div class="lg-sub-html"></div>'}j='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+l+'</div><div class="lg-toolbar group"><span class="lg-close lg-icon"></span></div>'+g+k+"</div></div>";d("body").append(j);this.$outer=d(".lg-outer");this.$slide=this.$outer.find(".lg-item");if(this.s.useLeft){this.$outer.addClass("lg-use-left");this.s.mode="lg-slide"}else{this.$outer.addClass("lg-use-css3")}n.setTop();d(c).on("resize.lg orientationchange.lg",function(){setTimeout(function(){n.setTop()},100)});this.$slide.eq(this.index).addClass("lg-current");if(this.doCss()){this.$outer.addClass("lg-css3")}else{this.$outer.addClass("lg-css");this.s.speed=0}this.$outer.addClass(this.s.mode);if(this.s.enableDrag&&this.$items.length>1){this.$outer.addClass("lg-grab")}if(this.s.showAfterLoad){this.$outer.addClass("lg-show-after-load")}if(this.doCss()){var m=this.$outer.find(".lg-inner");m.css("transition-timing-function",this.s.cssEasing);m.css("transition-duration",this.s.speed+"ms")}d(".lg-backdrop").addClass("in");setTimeout(function(){n.$outer.addClass("lg-visible")},this.s.backdropDuration);if(this.s.download){this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>')}this.prevScrollTop=d(c).scrollTop()};b.prototype.setTop=function(){if(this.s.height!=="100%"){var g=d(c).height();var i=(g-parseInt(this.s.height,10))/2;var h=this.$outer.find(".lg");if(g>=parseInt(this.s.height,10)){h.css("top",i+"px")}else{h.css("top","0px")}}};b.prototype.doCss=function(){var g=function(){var k=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"];var h=a.documentElement;var j=0;for(j=0;j<k.length;j++){if(k[j] in h.style){return true}}};if(g()){return true}return false};b.prototype.isVideo=function(l,h){var j;if(this.s.dynamic){j=this.s.dynamicEl[h].html}else{j=this.$items.eq(h).attr("data-html")}if(!l&&j){return{html5:true}}var i=l.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i);var g=l.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);var k=l.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i);if(i){return{youtube:i}}else{if(g){return{vimeo:g}}else{if(k){return{dailymotion:k}}}}};b.prototype.counter=function(){if(this.s.counter){d(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")}};b.prototype.addHtml=function(g){var i=null;var j;if(this.s.dynamic){if(this.s.dynamicEl[g].subHtmlUrl){j=this.s.dynamicEl[g].subHtmlUrl}else{i=this.s.dynamicEl[g].subHtml}}else{if(this.$items.eq(g).attr("data-sub-html-url")){j=this.$items.eq(g).attr("data-sub-html-url")}else{i=this.$items.eq(g).attr("data-sub-html")}}if(!j){if(typeof i!=="undefined"&&i!==null){var h=i.substring(0,1);if(h==="."||h==="#"){i=d(i).html()}else{i=i}}else{i=""}}if(this.s.appendSubHtmlTo===".lg-sub-html"){if(j){this.$outer.find(this.s.appendSubHtmlTo).load(j)}else{this.$outer.find(this.s.appendSubHtmlTo).html(i)}}else{if(j){this.$slide.eq(g).load(j)}else{this.$slide.eq(g).append(i)}}if(typeof i!=="undefined"&&i!==null){if(i===""){this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html")}else{this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")}}this.$el.trigger("onAfterAppendSubHtml.lg",[g])};b.prototype.preload=function(h){var k=1;var g=1;for(k=1;k<=this.s.preload;k++){if(k>=this.$items.length-h){break}this.loadContent(h+k,false,0)}for(g=1;g<=this.s.preload;g++){if(h-g<0){break}this.loadContent(h-g,false,0)}};b.prototype.loadContent=function(j,k,w){var q=this;var s=false;var x;var n;var v;var i;var p;var h;var o=function(D){var y=[];var A=[];for(var C=0;C<D.length;C++){var E=D[C].split(" ");if(E[0]===""){E.splice(0,1)}A.push(E[0]);y.push(E[1])}var B=d(c).width();for(var z=0;z<y.length;z++){if(parseInt(y[z],10)>B){n=A[z];break}}};if(q.s.dynamic){if(q.s.dynamicEl[j].poster){s=true;v=q.s.dynamicEl[j].poster}h=q.s.dynamicEl[j].html;n=q.s.dynamicEl[j].src;if(q.s.dynamicEl[j].responsive){var u=q.s.dynamicEl[j].responsive.split(",");o(u)}i=q.s.dynamicEl[j].srcset;p=q.s.dynamicEl[j].sizes}else{if(q.$items.eq(j).attr("data-poster")){s=true;v=q.$items.eq(j).attr("data-poster")}h=q.$items.eq(j).attr("data-html");n=q.$items.eq(j).attr("href")||q.$items.eq(j).attr("data-src");if(q.$items.eq(j).attr("data-responsive")){var l=q.$items.eq(j).attr("data-responsive").split(",");o(l)}i=q.$items.eq(j).attr("data-srcset");p=q.$items.eq(j).attr("data-sizes")}var m=false;if(q.s.dynamic){if(q.s.dynamicEl[j].iframe){m=true}}else{if(q.$items.eq(j).attr("data-iframe")==="true"){m=true}}var r=q.isVideo(n,j);if(!q.$slide.eq(j).hasClass("lg-loaded")){if(m){q.$slide.eq(j).prepend('<div class="lg-video-cont" style="max-width:'+q.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+n+'"  allowfullscreen="true"></iframe></div></div>')}else{if(s){var g="";if(r&&r.youtube){g="lg-has-youtube"}else{if(r&&r.vimeo){g="lg-has-vimeo"}else{g="lg-has-html5"}}q.$slide.eq(j).prepend('<div class="lg-video-cont '+g+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+v+'" /></div></div>')}else{if(r){q.$slide.eq(j).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>');q.$el.trigger("hasVideo.lg",[j,n,h])}else{q.$slide.eq(j).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+n+'" /></div>')}}}q.$el.trigger("onAferAppendSlide.lg",[j]);x=q.$slide.eq(j).find(".lg-object");if(p){x.attr("sizes",p)}if(i){x.attr("srcset",i);try{picturefill({elements:[x[0]]})}catch(t){console.error("Make sure you have included Picturefill version 2")}}if(this.s.appendSubHtmlTo!==".lg-sub-html"){q.addHtml(j)}q.$slide.eq(j).addClass("lg-loaded")}q.$slide.eq(j).find(".lg-object").on("load.lg error.lg",function(){var y=0;if(w&&!d("body").hasClass("lg-from-hash")){y=w}setTimeout(function(){q.$slide.eq(j).addClass("lg-complete");q.$el.trigger("onSlideItemLoad.lg",[j,w||0])},y)});if(r&&r.html5&&!s){q.$slide.eq(j).addClass("lg-complete")}if(k===true){if(!q.$slide.eq(j).hasClass("lg-complete")){q.$slide.eq(j).find(".lg-object").on("load.lg error.lg",function(){q.preload(j)})}else{q.preload(j)}}};b.prototype.slide=function(m,o,j){var k=this.$outer.find(".lg-current").index();var l=this;if(l.lGalleryOn&&(k===m)){return}var n=this.$slide.length;var r=l.lGalleryOn?this.s.speed:0;var h=false;var g=false;if(!l.lgBusy){this.$el.trigger("onBeforeSlide.lg",[k,m,o,j]);l.lgBusy=true;clearTimeout(l.hideBartimeout);if(this.s.appendSubHtmlTo===".lg-sub-html"){setTimeout(function(){l.addHtml(m)},r)}this.arrowDisable(m);if(!o){l.$outer.addClass("lg-no-trans");this.$slide.removeClass("lg-prev-slide lg-next-slide");if(m<k){g=true;if((m===0)&&(k===n-1)&&!j){g=false;h=true}}else{if(m>k){h=true;if((m===n-1)&&(k===0)&&!j){g=true;h=false}}}if(g){this.$slide.eq(m).addClass("lg-prev-slide");this.$slide.eq(k).addClass("lg-next-slide")}else{if(h){this.$slide.eq(m).addClass("lg-next-slide");this.$slide.eq(k).addClass("lg-prev-slide")}}setTimeout(function(){l.$slide.removeClass("lg-current");l.$slide.eq(m).addClass("lg-current");l.$outer.removeClass("lg-no-trans")},50)}else{var p=m-1;var q=m+1;if((m===0)&&(k===n-1)){q=0;p=n-1}else{if((m===n-1)&&(k===0)){q=0;p=n-1}}this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide");l.$slide.eq(p).addClass("lg-prev-slide");l.$slide.eq(q).addClass("lg-next-slide");l.$slide.eq(m).addClass("lg-current")}if(l.lGalleryOn){setTimeout(function(){l.loadContent(m,true,0)},this.s.speed+50);setTimeout(function(){l.lgBusy=false;l.$el.trigger("onAfterSlide.lg",[k,m,o,j])},this.s.speed)}else{l.loadContent(m,true,l.s.backdropDuration);l.lgBusy=false;l.$el.trigger("onAfterSlide.lg",[k,m,o,j])}if(this.s.download){var i;if(l.s.dynamic){i=l.s.dynamicEl[m].downloadUrl||l.s.dynamicEl[m].src}else{i=l.$items.eq(m).attr("data-download-url")||l.$items.eq(m).attr("href")||l.$items.eq(m).attr("data-src")}d("#lg-download").attr("href",i)}l.lGalleryOn=true;if(this.s.counter){d("#lg-counter-current").text(m+1)}}};b.prototype.goToNextSlide=function(g){var h=this;if(!h.lgBusy){if((h.index+1)<h.$slide.length){h.index++;h.$el.trigger("onBeforeNextSlide.lg",[h.index]);h.slide(h.index,g,false)}else{if(h.s.loop){h.index=0;h.$el.trigger("onBeforeNextSlide.lg",[h.index]);h.slide(h.index,g,false)}else{if(h.s.slideEndAnimatoin){h.$outer.addClass("lg-right-end");setTimeout(function(){h.$outer.removeClass("lg-right-end")},400)}}}}};b.prototype.goToPrevSlide=function(g){var h=this;if(!h.lgBusy){if(h.index>0){h.index--;h.$el.trigger("onBeforePrevSlide.lg",[h.index,g]);h.slide(h.index,g,false)}else{if(h.s.loop){h.index=h.$items.length-1;h.$el.trigger("onBeforePrevSlide.lg",[h.index,g]);h.slide(h.index,g,false)}else{if(h.s.slideEndAnimatoin){h.$outer.addClass("lg-left-end");setTimeout(function(){h.$outer.removeClass("lg-left-end")},400)}}}}};b.prototype.keyPress=function(){var g=this;if(this.$items.length>1){d(c).on("keyup.lg",function(h){if(g.$items.length>1){if(h.keyCode===37){h.preventDefault();g.goToPrevSlide()}if(h.keyCode===39){h.preventDefault();g.goToNextSlide()}}})}d(c).on("keydown.lg",function(h){if(g.s.escKey===true&&h.keyCode===27){h.preventDefault();if(!g.$outer.hasClass("lg-thumb-open")){g.destroy()}else{g.$outer.removeClass("lg-thumb-open")}}})};b.prototype.arrow=function(){var g=this;this.$outer.find(".lg-prev").on("click.lg",function(){g.goToPrevSlide()});this.$outer.find(".lg-next").on("click.lg",function(){g.goToNextSlide()})};b.prototype.arrowDisable=function(g){if(!this.s.loop&&this.s.hideControlOnEnd){if((g+1)<this.$slide.length){this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled")}else{this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled")}if(g>0){this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled")}else{this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled")}}};b.prototype.setTranslate=function(h,i,g){if(this.s.useLeft){h.css("left",i)}else{h.css({transform:"translate3d("+(i)+"px, "+g+"px, 0px)"})}};b.prototype.touchMove=function(h,g){var i=g-h;this.$outer.addClass("lg-dragging");this.setTranslate(this.$slide.eq(this.index),i,0);this.setTranslate(d(".lg-prev-slide"),-this.$slide.eq(this.index).width()+i,0);this.setTranslate(d(".lg-next-slide"),this.$slide.eq(this.index).width()+i,0)};b.prototype.touchEnd=function(h){var g=this;if(g.s.mode!=="lg-slide"){g.$outer.addClass("lg-slide")}this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0");setTimeout(function(){g.$outer.removeClass("lg-dragging");if((h<0)&&(Math.abs(h)>g.s.swipeThreshold)){g.goToNextSlide(true)}else{if((h>0)&&(Math.abs(h)>g.s.swipeThreshold)){g.goToPrevSlide(true)}else{if(Math.abs(h)<5){g.$el.trigger("onSlideClick.lg")}}}g.$slide.removeAttr("style")});setTimeout(function(){if(!g.$outer.hasClass("lg-dragging")&&g.s.mode!=="lg-slide"){g.$outer.removeClass("lg-slide")}},g.s.speed+100)};b.prototype.enableSwipe=function(){var j=this;var i=0;var g=0;var h=false;if(j.s.enableSwipe&&j.isTouch&&j.doCss()){j.$slide.on("touchstart.lg",function(k){if(!j.$outer.hasClass("lg-zoomed")&&!j.lgBusy){k.preventDefault();j.manageSwipeClass();i=k.originalEvent.targetTouches[0].pageX}});j.$slide.on("touchmove.lg",function(k){if(!j.$outer.hasClass("lg-zoomed")){k.preventDefault();g=k.originalEvent.targetTouches[0].pageX;j.touchMove(i,g);h=true}});j.$slide.on("touchend.lg",function(){if(!j.$outer.hasClass("lg-zoomed")){if(h){h=false;j.touchEnd(g-i)}else{j.$el.trigger("onSlideClick.lg")}}})}};b.prototype.enableDrag=function(){var k=this;var j=0;var h=0;var g=false;var i=false;if(k.s.enableDrag&&!k.isTouch&&k.doCss()){k.$slide.on("mousedown.lg",function(l){if(!k.$outer.hasClass("lg-zoomed")){if(d(l.target).hasClass("lg-object")||d(l.target).hasClass("lg-video-play")){l.preventDefault();if(!k.lgBusy){k.manageSwipeClass();j=l.pageX;g=true;k.$outer.scrollLeft+=1;k.$outer.scrollLeft-=1;k.$outer.removeClass("lg-grab").addClass("lg-grabbing");k.$el.trigger("onDragstart.lg")}}}});d(c).on("mousemove.lg",function(l){if(g){i=true;h=l.pageX;k.touchMove(j,h);k.$el.trigger("onDragmove.lg")}});d(c).on("mouseup.lg",function(l){if(i){i=false;k.touchEnd(h-j);k.$el.trigger("onDragend.lg")}else{if(d(l.target).hasClass("lg-object")||d(l.target).hasClass("lg-video-play")){k.$el.trigger("onSlideClick.lg")}}if(g){g=false;k.$outer.removeClass("lg-grabbing").addClass("lg-grab")}})}};b.prototype.manageSwipeClass=function(){var g=this.index+1;var h=this.index-1;var i=this.$slide.length;if(this.s.loop){if(this.index===0){h=i-1}else{if(this.index===i-1){g=0}}}this.$slide.removeClass("lg-next-slide lg-prev-slide");if(h>-1){this.$slide.eq(h).addClass("lg-prev-slide")}this.$slide.eq(g).addClass("lg-next-slide")};b.prototype.mousewheel=function(){var g=this;g.$outer.on("mousewheel.lg",function(h){if(!h.deltaY){return}if(h.deltaY>0){g.goToPrevSlide()}else{g.goToNextSlide()}h.preventDefault()})};b.prototype.closeGallery=function(){var h=this;var g=false;this.$outer.find(".lg-close").on("click.lg",function(){h.destroy()});if(h.s.closable){h.$outer.on("mousedown.lg",function(i){if(d(i.target).is(".lg-outer")||d(i.target).is(".lg-item ")||d(i.target).is(".lg-img-wrap")){g=true}else{g=false}});h.$outer.on("mouseup.lg",function(i){if(d(i.target).is(".lg-outer")||d(i.target).is(".lg-item ")||d(i.target).is(".lg-img-wrap")&&g){if(!h.$outer.hasClass("lg-dragging")){h.destroy()}}})}};b.prototype.destroy=function(g){var h=this;h.$el.trigger("onBeforeClose.lg");d(c).scrollTop(h.prevScrollTop);if(g){this.$items.off("click.lg click.lgcustom");d.removeData(h.el,"lightGallery")}this.$el.off(".lg.tm");d.each(d.fn.lightGallery.modules,function(i){if(h.modules[i]){h.modules[i].destroy()}});this.lGalleryOn=false;clearTimeout(h.hideBartimeout);this.hideBartimeout=false;d(c).off(".lg");d("body").removeClass("lg-on lg-from-hash");if(h.$outer){h.$outer.removeClass("lg-visible")}d(".lg-backdrop").removeClass("in");setTimeout(function(){if(h.$outer){h.$outer.remove()}d(".lg-backdrop").remove();h.$el.trigger("onCloseAfter.lg")},h.s.backdropDuration+50)};d.fn.lightGallery=function(g){return this.each(function(){if(!d.data(this,"lightGallery")){d.data(this,"lightGallery",new b(this,g))}else{try{d(this).data("lightGallery").init()}catch(h){console.error("lightGallery has not initiated properly")}}})};d.fn.lightGallery.modules={}})(jQuery,window,document);