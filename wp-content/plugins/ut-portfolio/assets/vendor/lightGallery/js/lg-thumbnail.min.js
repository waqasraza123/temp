
/*! lightgallery - v1.2.6 - 2015-10-07
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2015 Sachin N; Licensed Apache 2.0 */
(function(c,b,a,e){var d={thumbnail:true,animateThumb:true,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:false,showThumbByDefault:true,toogleThumb:true,pullCaptionUp:true,enableThumbDrag:true,enableThumbSwipe:true,swipeThreshold:50,loadYoutubeThumbnail:true,youtubeThumbSize:1,loadVimeoThumbnail:true,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:true};var f=function(g){this.core=c(g).data("lightGallery");this.core.s=c.extend({},d,this.core.s);this.$el=c(g);this.$thumbOuter=null;this.thumbOuterWidth=0;this.thumbTotalWidth=(this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin));this.thumbIndex=this.core.index;this.left=0;this.init();return this};f.prototype.init=function(){if(this.core.s.thumbnail&&this.core.$items.length>1){if(this.core.s.showThumbByDefault){this.core.$outer.addClass("lg-thumb-open")}if(this.core.s.pullCaptionUp){this.core.$outer.addClass("lg-pull-caption-up")}this.build();if(this.core.s.animateThumb){if(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()){this.enableThumbDrag()}if(this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()){this.enableThumbSwipe()}this.thumbClickable=false}else{this.thumbClickable=true}this.toogle();this.thumbkeyPress()}};f.prototype.build=function(){var n=this;var k="";var g="";var m;var j='<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>';switch(this.core.s.vimeoThumbSize){case"thumbnail_large":g="640";break;case"thumbnail_medium":g="200x150";break;case"thumbnail_small":g="100x75"}n.core.$outer.addClass("lg-has-thumb");n.core.$outer.find(".lg").append(j);n.$thumbOuter=n.core.$outer.find(".lg-thumb-outer");n.thumbOuterWidth=n.$thumbOuter.width();if(n.core.s.animateThumb){n.core.$outer.find(".lg-thumb").css({width:n.thumbTotalWidth+"px",position:"relative"})}if(this.core.s.animateThumb){n.$thumbOuter.css("height",n.core.s.thumbContHeight+"px")}function l(s,i,o){var q=n.core.isVideo(s,o)||{};var r;var p="";if(q.youtube||q.vimeo||q.dailymotion){if(q.youtube){if(n.core.s.loadYoutubeThumbnail){r="//img.youtube.com/vi/"+q.youtube[1]+"/"+n.core.s.youtubeThumbSize+".jpg"}else{r=i}}else{if(q.vimeo){if(n.core.s.loadVimeoThumbnail){r="//i.vimeocdn.com/video/error_"+g+".jpg";p=q.vimeo[1]}else{r=i}}else{if(q.dailymotion){if(n.core.s.loadDailymotionThumbnail){r="//www.dailymotion.com/thumbnail/video/"+q.dailymotion[1]}else{r=i}}}}}else{r=i}k+='<div data-vimeo-id="'+p+'" class="lg-thumb-item" style="width:'+n.core.s.thumbWidth+"px; margin-right: "+n.core.s.thumbMargin+'px"><img src="'+r+'" /></div>';p=""}if(n.core.s.dynamic){for(var h=0;h<n.core.s.dynamicEl.length;h++){l(n.core.s.dynamicEl[h].src,n.core.s.dynamicEl[h].thumb,h)}}else{n.core.$items.each(function(o){if(!n.core.s.exThumbImage){l(c(this).attr("href")||c(this).attr("data-src"),c(this).find("img").attr("src"),o)}else{l(c(this).attr("href")||c(this).attr("data-src"),c(this).attr(n.core.s.exThumbImage),o)}})}n.core.$outer.find(".lg-thumb").html(k);m=n.core.$outer.find(".lg-thumb-item");m.each(function(){var o=c(this);var i=o.attr("data-vimeo-id");if(i){c.getJSON("http://www.vimeo.com/api/v2/video/"+i+".json?callback=?",{format:"json"},function(p){o.find("img").attr("src",p[0][n.core.s.vimeoThumbSize])})}});m.eq(n.core.index).addClass("active");n.core.$el.on("onBeforeSlide.lg.tm",function(){m.removeClass("active");m.eq(n.core.index).addClass("active")});m.on("click.lg touchend.lg",function(){var i=c(this);setTimeout(function(){if((n.thumbClickable&&!n.core.lgBusy)||!n.core.doCss()){n.core.index=i.index();n.core.slide(n.core.index,false,true)}},50)});n.core.$el.on("onBeforeSlide.lg.tm",function(){n.animateThumb(n.core.index)});c(b).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){n.animateThumb(n.core.index);n.thumbOuterWidth=n.$thumbOuter.width()},200)})};f.prototype.setTranslate=function(g){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+(g)+"px, 0px, 0px)"})};f.prototype.animateThumb=function(h){var i=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var g;switch(this.core.s.currentPagerPosition){case"left":g=0;break;case"middle":g=(this.thumbOuterWidth/2)-(this.core.s.thumbWidth/2);break;case"right":g=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=((this.core.s.thumbWidth+this.core.s.thumbMargin)*h-1)-g;if(this.left>(this.thumbTotalWidth-this.thumbOuterWidth)){this.left=this.thumbTotalWidth-this.thumbOuterWidth}if(this.left<0){this.left=0}if(this.core.lGalleryOn){if(!i.hasClass("on")){this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms")}if(!this.core.doCss()){i.animate({left:-this.left+"px"},this.core.s.speed)}}else{if(!this.core.doCss()){i.css("left",-this.left+"px")}}this.setTranslate(this.left)}};f.prototype.enableThumbDrag=function(){var l=this;var j=0;var h=0;var g=false;var i=false;var k=0;l.$thumbOuter.addClass("lg-grab");l.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(m){if(l.thumbTotalWidth>l.thumbOuterWidth){m.preventDefault();j=m.pageX;g=true;l.core.$outer.scrollLeft+=1;l.core.$outer.scrollLeft-=1;l.thumbClickable=false;l.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing")}});c(b).on("mousemove.lg.thumb",function(m){if(g){k=l.left;i=true;h=m.pageX;l.$thumbOuter.addClass("lg-dragging");k=k-(h-j);if(k>(l.thumbTotalWidth-l.thumbOuterWidth)){k=l.thumbTotalWidth-l.thumbOuterWidth}if(k<0){k=0}l.setTranslate(k)}});c(b).on("mouseup.lg.thumb",function(){if(i){i=false;l.$thumbOuter.removeClass("lg-dragging");l.left=k;if(Math.abs(h-j)<l.core.s.swipeThreshold){l.thumbClickable=true}}else{l.thumbClickable=true}if(g){g=false;l.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab")}})};f.prototype.enableThumbSwipe=function(){var k=this;var i=0;var g=0;var h=false;var j=0;k.core.$outer.find(".lg-thumb").on("touchstart.lg",function(l){if(k.thumbTotalWidth>k.thumbOuterWidth){l.preventDefault();i=l.originalEvent.targetTouches[0].pageX;k.thumbClickable=false}});k.core.$outer.find(".lg-thumb").on("touchmove.lg",function(l){if(k.thumbTotalWidth>k.thumbOuterWidth){l.preventDefault();g=l.originalEvent.targetTouches[0].pageX;h=true;k.$thumbOuter.addClass("lg-dragging");j=k.left;j=j-(g-i);if(j>(k.thumbTotalWidth-k.thumbOuterWidth)){j=k.thumbTotalWidth-k.thumbOuterWidth}if(j<0){j=0}k.setTranslate(j)}});k.core.$outer.find(".lg-thumb").on("touchend.lg",function(){if(k.thumbTotalWidth>k.thumbOuterWidth){if(h){h=false;k.$thumbOuter.removeClass("lg-dragging");if(Math.abs(g-i)<k.core.s.swipeThreshold){k.thumbClickable=true}k.left=j}else{k.thumbClickable=true}}else{k.thumbClickable=true}})};f.prototype.toogle=function(){var g=this;if(g.core.s.toogleThumb){g.core.$outer.addClass("lg-can-toggle");g.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>');g.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){g.core.$outer.toggleClass("lg-thumb-open")})}};f.prototype.thumbkeyPress=function(){var g=this;c(b).on("keydown.lg.thumb",function(h){if(h.keyCode===38){h.preventDefault();g.core.$outer.addClass("lg-thumb-open")}else{if(h.keyCode===40){h.preventDefault();g.core.$outer.removeClass("lg-thumb-open")}}})};f.prototype.destroy=function(){if(this.core.s.thumbnail&&this.core.$items.length>1){c(b).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb");this.$thumbOuter.remove();this.core.$outer.removeClass("lg-has-thumb")}};c.fn.lightGallery.modules.Thumbnail=f})(jQuery,window,document);